<!DOCTYPE html>
<html>
	<head>
		<link rel="shortcut icon" href="icon.gif" />
		<link href="style.css" rel="stylesheet" type="text/css" />
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>Live Tabletop</title>
		<!-- JQuery framework for DOM manipulation and Ajax -->
		<script type="text/javascript" src="jquery-1.11.0.min.js"></script>
		<!-- main Live Tabletop object: global LT variable -->
		<script type="text/javascript" src="js/LT.js"></script>
		<!-- classes: LT.Panel, LT.Table, LT.User, LT.Tile, etc. -->
		<script type="text/javascript" src="js/Grid.js"></script>
		<script type="text/javascript" src="js/Image.js"></script>
		<script type="text/javascript" src="js/Palette.js"></script>
		<script type="text/javascript" src="js/Panel.js"></script>
		<script type="text/javascript" src="js/Piece.js"></script>
		<script type="text/javascript" src="js/Table.js"></script>
		<script type="text/javascript" src="js/Tile.js"></script>
		<script type="text/javascript" src="js/User.js"></script>
		<!-- panels: LT.characterPanel, LT.userPanel, etc. -->
		<script type="text/javascript" src="js/userPanel.js"></script>
		<script type="text/javascript" src="js/tablePanel.js"></script>
		<script type="text/javascript" src="js/mapPanel.js"></script>
		<script type="text/javascript" src="js/characterPanel.js"></script>
		<!-- utility functions -->
		<script type="text/javascript" src="js/init.js"></script>
		<script type="text/javascript" src="js/install.js"></script>
		<script type="text/javascript" src="js/login.js"></script>
		<script type="text/javascript" src="js/uploader.js"></script>
	</head>
	<body>

		<!-- installer, should be hidden when Live Tabletop is installed -->
		<form id="installBox">
			<p>
				Live Tabletop needs to be configured to complete installation.
				The database server URL, the name of the database, and the
				username and password required to access the database will vary
				from site to site. (Live Tabletop will try to create the database
				if it does not yet exist.)
				
			</p>
			<table>
				<tr><td>Database Server (URL): </td><td><input type="text" size="12" name="location"/></td></tr>
				<tr><td>Database Name: </td><td><input type="text" size="12" name="database"/></td></tr>
				<tr><td>Database Username: </td><td><input type="text" size="12" name="username"/></td></tr>
				<tr><td>Database Password: </td><td><input type="password" size="12" name="password"/></td></tr>
				<tr>
					<td colspan="2">
						<p>Choose a username and password for Live Tabletop
						administration. (This is not a user account.)</p>
					</td>
				</tr>
				<tr><td>Administrator Username: </td><td><input type="text" size="12" name="admin_username"/></td></tr>
				<tr><td>Administrator Password: </td><td><input type="password" size="12" name="admin_password"/></td></tr>
				<tr><td>Re-type Password: </td><td><input type="password" size="12" name="retype_password"/></td></tr>
			</table>
			<input type="button" value="Configure Live Tabletop"/>
		</form>

		<!-- displays the table's current map -->
		<div id="map">
			<div id="tileLayer"></div>
			<div id="wallLayer"></div>
			<div id="pieceLayer"></div>
			<div id="fogLayer"></div>
			<div id="clickLayers">
				<div class="clickLayer" id="clickTileLayer"></div>
				<div class="clickLayer" id="clickWallLayer"></div>
				<div class="clickLayer" id="clickPieceLayer"></div>
			</div>
		</div>

		<!-- panels -->
		<div class="panel" data-panel="user">
			<div class="title">
				<div class="resizeTL"></div>
				<div class="caption">User</div>
				<div class="resizeTR"></div>
				<div class="close"></div>
			</div>
			<div class="tabBar">
				<div class="tab" data-tab="user list">Friends</div>
				<div class="tab" data-tab="user info">My Account</div>
				<div class="tab active" data-tab="help">Help</div>
			</div>
			<div class="content" data-tab="user list">
			</div>
			<div class="content" data-tab="user info">
				<a id="logout">Logout</a>
				<a id="defaultPanels">Default Panels</a>
			</div>
			<div class="content" data-tab="help">
				<form id="userCreator">
					<!-- FIXME: placeholder not supported in IE9 and earlier -->
					<input type="text" name="username" placeholder="username"/>
					<input type="password" name="password" placeholder="password"/>
					<input type="password" name="retype_password" placeholder="re-type password"/>
					<input type="button" id="createUser" value="Create Account"/>
				</form>
			</div>
			<div class="bottom">
				<div class="resizeBL"></div>
				<div class="resizeBR"></div>
			</div>
		</div>

		<div class="panel" data-panel="table">
			<div class="title">
				<div class="resizeTL"></div>
				<div class="caption">Table</div>
				<div class="resizeTR"></div>
				<div class="close"></div>
			</div>
			<div class="tabBar">
				<div class="tab active" data-tab="table list">List</div>
				<div class="tab" data-tab="table info">Info</div>
				<div class="tab" data-tab="chat">Chat & Roll</div>
			</div>
			<div class="content" data-tab="table list">
				<table>
					<tbody>
						<tr><th>table name (click to join)</th><th>action</th></tr>
						<tr><td><a>My Table</a> (owned)</td><td><input type="button" value="disown"/></td></tr>
					</tbody>
				</table>
			</div>
			<div class="content" data-tab="table info">
				<span id="tableName">My Table</span>
				<input type="button" value="rename"/>
				<input type="checkbox" value="private" id="private" checked="checked"/>
				<label for="private">private</label>
				<table>
					<tbody>
						<tr>
							<th>user (click for details)</th>
							<th>owner</th>
							<th>viewing</th>
							<th>actions</th>
						</tr>
						<tr>
							<td><a>Myself</a></td>
							<td><input type="checkbox" value="owner"/></td>
							<td><input type="checkbox" value="viewing"/></td>
							<td><input type="button" value="remove"/><input type="button" value="ban"/></td>
						</tr>
					</tbody>
				</table>
				<select name="user"><option>My Friend</option></select>
				<input type="button" value="invite to table"/>
				<input type="button" value="share table"/>
			</div>
			<div class="content" data-tab="chat">
				<div id="chatOutput"><a id="chatBottom"> </a></div>
				<form id="chatForm"><textarea id="chatInput"></textarea><input type="submit" value="Send"/></form>
			</div>
			<div class="bottom">
				<div class="resizeBL"></div>
				<div class="resizeBR"></div>
			</div>
		</div>


		<div class="panel" data-panel="map">
			<div class="title">
				<div class="resizeTL"></div>
				<div class="caption">Map</div>
				<div class="resizeTR"></div>
				<div class="close"></div>
			</div>
			<div class="tabBar">
				<div class="tab" data-tab="map list">List</div>
				<div class="tab" data-tab="map info">Info</div>
				<div class="tab active" data-tab="map tools">Tools</div>
				<div class="tab" data-tab="piece list">Pieces</div>
				<div class="tab" data-tab="piece info">Piece Info</div>
			</div>
			<div class="content" data-tab="map list">
				<table>
					<tbody>
						<tr>
							<th>name (click to open)</th>
							<th>type</th>
							<th>rows</th>
							<th>cols</th>
							<th>background</th><!-- TODO: thumbnail? -->
							<th>action</th>
						</tr>
						<tr>
							<td>My Map</td>
							<td>square</td>
							<td>25</td>
							<td>25</td>
							<td>none</td>
							<td><input type="button" value="disown"/></td>
						</tr>
					</tbody>
				</table>
				<form id="mapCreator">
					<!-- TODO: GUI image selector -->
					<!-- TODO: url option -->
					<!-- TODO: default tile option -->
					<div class="inputDiv">Background:
						<select name="image_id" style="width: 135px">
							<option value="-1">None</option>
						</select>
					</div>
					<div class="inputDiv">
						<input name="type" value="square" id="newMapSquare"/><label for="newMapSquare">Square</label>
						<input name="type" value="hex" id="newMapHex"/><label for="newMapHex">Hex</label>
					</div>
					<div class="inputDiv">Columns: <input name="columns" type="text" size="1" value="25"/></div>
					<div class="inputDiv">Rows: <input name="rows" type="text" size="1" value="25"/></div>
					<input type="button" value="Create Map" id="createMap"/>
				</form>
			</div>
			<div class="content" data-tab="map info">
				<form id="mapEditor">
					<table>
					<div class="inputDiv">Name: <input name="name" type="text" placeholder="Map Name"/></div>
					<div class="inputDiv">Background: <select name="image_id"><option value="-1">None</option></select></div>
					<div class="inputDiv">
						<input name="type" value="square" id="editMapSquare"/><label for="editMapSquare">Square</label>
						<input name="type" value="hex" id="editMapHex"/><label for="editMapHex">Hex</label>
					</div>
					<div class="inputDiv">Columns: <input name="columns" type="text" size="1" value="25"/></div>
					<div class="inputDiv">Rows: <input name="rows" type="text" size="1" value="25"/></div>
					<table>
						<tbody>
							<tr><th></th><th>min</th><th>max</th></tr>
							<tr>
								<td>Zoom: </td>
								<td>
									<select name="min_zoom">
										<option value="0.25" selected="selected">25%</option>
										<option value="0.5">50%</option>
										<option value="1">100%</option>
									</select>
								</td>
								<td>
									<select name="max_zoom">
										<option value="1">100%</option>
										<option value="2">200%</option>
										<option value="4" selected="selected">400%</option>
									</select>
								</td>
							</tr>
							<tr>
								<td>Rotate: </td>
								<td>
									<select name="min_rotate">
										<option value="-180" selected="selected">180&deg; left</option>
										<option value="-135">135&deg; left</option>
										<option value="-90">90&deg; left</option>
										<option value="-45">45&deg; left</option>
										<option value="0">0&deg;</option>
										<option value="45">45&deg; right</option>
									</select>
								</td>
								<td>
									<select name="max_rotate">
										<option value="-45">45&deg; left</option>
										<option value="0">0&deg;</option>
										<option value="45">45&deg; right</option>
										<option value="90">90&deg; right</option>
										<option value="135">135&deg; right</option>
										<option value="180" selected="selected">180&deg; right</option>
									</select>
								</td>
							</tr>
							<tr>
								<td>Tilt: </td>
								<td>
									<select name="min_tilt">
										<option value="0" selected="selected">0&deg;</option>
										<option value="30">30&deg;</option>
										<option value="60">60&deg;</option>
										<option value="90">90&deg;</option>
									</select>
								</td>
								<td>
									<select name="max_tilt">
										<option value="0">0&deg;</option>
										<option value="30">30&deg;</option>
										<option value="60">60&deg;</option>
										<option value="90" selected="selected">90&deg;</option>
									</select>
								</td>
							</tr>
						</tbody>
					</table>
					<table>
						<tbody>
							<tr><th></th><th>thickness</th><th>color</th></tr>
							<tr>
								<td>Grid: </td>
								<td>
									<select name="grid_thickness">
										<option value="0">none</option>
										<option value="1">light</option>
										<option value="2">heavy</option>
									</select>
								</td>
								<td><input type="text" name="grid_color" value="black"/></td>
							</tr>
							<tr>
								<td>Wall: </td>
								<td>
									<select name="wall_thickness">
										<option value="2">thinner</option>
										<option value="4">thicker</option>
									</select>
								</td>
								<td><input type="text" name="wall_color" value="black"/></td>
							</tr>
							<tr>
								<td>Door: </td>
								<td>
									<select name="door_thickness">
										<option value="2">thinner</option>
										<option value="4">thicker</option>
									</select>
								</td>
								<td><input type="text" name="door_color" value="white"/></td>
							</tr>
						</tbody>
					</table>
					<input type="button" value="Apply Changes" id="applyMapChanges"/>
					<input type="button" value="Delete Map" id="deleteMap"/>
				</form>
			</div>
			<div class="content" data-tab="map tools">
				<div>
					<div class="swatch" id="eraser">erase</div>
					<div class="swatch" id="fogTool">fog</div>
					<div class="swatch" id="wallTool">wall</div>
					<div class="swatch" id="pieceTool">piece</div>
					<div class="clearBoth"></div><!-- TODO: parent div overflow:auto instead of this div? -->
				</div>
				<div id="tileBrushes"></div>
			</div>
			<div class="content" data-tab="piece list">
				<table>
					<tbody>
						<tr>
							<th>image</th>
							<th>x</th>
							<th>y</th>
							<th>name</th>
							<th>character</th>
							<th>color</th>
							<th>action</th>
						</tr>
						<tr>
							<td></td>
							<td>0</td>
							<td>0</td>
							<td></td>
							<td></td>
							<td></td>
							<td><input type="button" value="delete"/></td>
						</tr>
					</tbody>
				</table>
				<form id="pieceCreator">
					<input name="image_id" type="hidden" value=""/>
					<input type="button" value="Create Piece" id="createPiece"/>
					<div class="clearBoth"></div>
				</form>
			</div>
			<div class="content" data-tab="piece info">
				<form id="pieceEditor">
					<table>
						<tbody>
							<tr><th></th><th>X</th><th>Y</th></tr>
							<tr>
								<td>Position: </td>
								<td><input name="x" type="text" size="1" value="0"/></td>
								<td><input name="y" type="text" size="1" value="0"/></td>
							</tr>
							<!-- TODO: GUI for centering piece -->
							<tr>
								<td>Center (px): </td>
								<td><input name="x_center" type="text" size="1" value="0"/></td>
								<td><input name="y_center" type="text" size="1" value="0"/></td>
							</tr>
							<tr>
								<td>Size (tiles): </td>
								<td><input name="x_tiles" type="text" size="1" value="0"/></td>
								<td><input name="y_tiles" type="text" size="1" value="0"/></td>
							</tr>
						</tbody>
					</table>
					<div class="inputDiv">Name: <input name="name" type="text" placeholder="Piece Name"/></div>
					<div class="inputDiv">Scale: <input name="scale" type="text" value="100"/>%</div>
					<div class="inputDiv">Character: <select name="character_id"><option value="-1">None</option></select></div>
					<input name="image_id" type="hidden" value=""/>
					<input type="button" value="Apply Changes" id="applyPieceChanges"/>
					<input type="button" value="Delete Piece" id="deletePiece"/>
					<div class="clearBoth"></div>
				</form>
				<div id="pieceEditorImages"></div>
			</div>
			<div class="bottom">
				<div class="resizeBL"></div>
				<div class="resizeBR"></div>
			</div>
		</div>

		<div class="panel" data-panel="character">
			<div class="title">
				<div class="resizeTL"></div>
				<div class="caption">Character</div>
				<div class="resizeTR"></div>
				<div class="close"></div>
			</div>
			<div class="tabBar">
				<div class="tab active" data-tab="character list">List</div>
				<div class="tab" data-tab="character info">Info</div>
				<div class="tab" data-tab="character stats">Stats</div>
				<div class="tab" data-tab="character notes">Notes</div>
			</div>
			<div class="content" data-tab="character list">
			</div>
			<div class="content" data-tab="character info">
			</div>
			<div class="content" data-tab="character stats">
					<form id="statCreator" style="display: none;">
						<input name="name" type="text" value="Stat"/>
						<input name="value" type="text" value="Value"/>
						<div class="buttonDiv" id="addStat"><div>+</div></div>
						<div class="clearBoth"></div>
					</form>
					<div class="separator"></div>
					<input type="button" value="Apply Changes" id="submitStats"/>
			</div>
			<div class="content" data-tab="character notes">
			</div>
			<div class="bottom">
				<div class="resizeBL"></div>
				<div class="resizeBR"></div>
			</div>
		</div>


		<!-- permanent controls at the top of the page -->
		<div id="pageBar">
			<div id="logo"></div>
			<div id="panelButtons">
				<div class="panelButton" data-panel="user">User</div>
				<div class="panelButton" data-panel="table">Table</div>
				<div class="panelButton" data-panel="map">Map</div>
				<div class="panelButton" data-panel="character">Character</div>
			</div>
			<form id="loginForm">
				<input type="text" name="username" placeholder="username"/>
				<input type="text" name="password" placeholder="password"/>
				<input type="button" value="Login">
			</form>
			<div id="userButton">
				<div id="loggedIn"></div>
				<div class="panelButton userPanel">
					<div class="panelButtonStart"></div>
					<div class="panelButtonCaption"><span id="userButtonCaption"></span>'s options</div>
					<div class="panelButtonEnd"></div>
				</div>
			</div>
			<div id="viewControls">
				<input type="button" value="-"/>
				<input type="button" value="+"/>
				<input type="button" value="&#8634;"/>
				<input type="button" value="&#8635;"/>
				<input type="button" value="&#8593;"/>
				<input type="button" value="&#8595;"/>
			</div>
		</div>

	</body>
</html>
