<!DOCTYPE html>
<html>
	<head>
		<link rel="shortcut icon" href="icon.gif" />
		<link href="style.css" rel="stylesheet" type="text/css" />
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>Live Tabletop</title>
		<!-- JQuery framework for DOM manipulation and Ajax -->
		<script type="text/javascript" src="jquery-1.11.0.min.js"></script>
		<!-- main Live Tabletop object: global LT variable -->
		<script type="text/javascript" src="js/LT.js"></script>
		<!-- classes: LT.Panel, LT.Table, LT.User, LT.Tile, etc. -->
		<script type="text/javascript" src="js/Grid.js"></script>
		<script type="text/javascript" src="js/Palette.js"></script>
		<script type="text/javascript" src="js/Panel.js"></script>
<!--
		<script type="text/javascript" src="js/Campaign.js"></script>
		<script type="text/javascript" src="js/Image.js"></script>
		<script type="text/javascript" src="js/Map.js"></script>
		<script type="text/javascript" src="js/Piece.js"></script>
		<script type="text/javascript" src="js/Tile.js"></script>
		<script type="text/javascript" src="js/User.js"></script>
-->
		<!-- panels: LT.characterPanel, LT.userPanel, etc. -->
		<script type="text/javascript" src="js/campaignPanel.js"></script>
		<script type="text/javascript" src="js/characterPanel.js"></script>
		<script type="text/javascript" src="js/mapPanel.js"></script>
		<script type="text/javascript" src="js/userPanel.js"></script>
		<!-- utility functions -->
		<script type="text/javascript" src="js/init.js"></script>
		<script type="text/javascript" src="js/install.js"></script>
		<script type="text/javascript" src="js/login.js"></script>
		<script type="text/javascript" src="js/uploader.js"></script>
	</head>
	<body>

		<!-- INSTALLER, should be hidden when Live Tabletop is installed -->

		<form id="installBox">
			<p>
				Live Tabletop needs to be configured to complete installation.
				The database server URL, the name of the database, and the
				username and password required to access the database will vary
				from site to site. (Live Tabletop will try to create the database
				if it does not yet exist.)	
			</p>
			<table>
				<tr><td>Database Server (URL): </td><td><input type="text" size="12" name="location"/></td></tr>
				<tr><td>Database Name: </td><td><input type="text" size="12" name="database"/></td></tr>
				<tr><td>Database Username: </td><td><input type="text" size="12" name="username"/></td></tr>
				<tr><td>Database Password: </td><td><input type="password" size="12" name="password"/></td></tr>
				<tr>
					<td colspan="2">
						<p>
							Choose a username and password for Live Tabletop
							administration. (This is not a user account.)
						</p>
					</td>
				</tr>
				<tr><td>Administrator Username: </td><td><input type="text" size="12" name="admin_login"/></td></tr>
				<tr><td>Administrator Password: </td><td><input type="password" size="12" name="admin_password"/></td></tr>
				<tr><td>Re-type Password: </td><td><input type="password" size="12" name="retype_password"/></td></tr>
			</table>
			<input type="button" value="Configure Live Tabletop"/>
		</form>

		<!-- WELCOME SCREEN -->

		<div id="welcome">
			<h1>Welcome to Live Tabletop!</h1>
			<p>
				Play tabletop roleplaying games online with your friends.<br/>
				Live Tabletop provides the game boards, pieces and dice.<br/>
				You supply the imagination, stories, rules and snacks.<br/>
				Live Tabletop is free to use and open source.
			</p>
			<iframe width="320" height="180" src="//www.youtube-nocookie.com/embed/BWAK0J8Uhzk?rel=0" frameborder="0" allowfullscreen></iframe>
			<div class="box" id="loginForm">
				<h2>Log in to Your Account</h2>
				<table>
					<tr><td>e-mail address</td><td><input type="text" name="email"/></td></tr>
					<tr><td>password</td><td><input type="password" name="password"/></td></tr>
				</table>
				<input type="button" value="log in"/>
			</div>
			or
			<div class="box collapsed" id="signupForm">
				<h2>Create a New Account</h2>
				<div>e-mail address <input type="text" name="email"/></div>
				<div>
					<input type="checkbox" checked="checked" name="subscribed" id="subscribe"/>
					<label for="subscribe">receive e-mail about Live Tabletop</label>
				</div>
				<div><input type="button" value="create account"/></div>
			</div>
			<a href="#" id="resetPasswordLink">forgot your password?</a>
			<div class="box" id="resetPasswordForm">
				<h2>Reset Password</h2>
				<p>Enter your e-mail address and we will send you a link to change your password.</p>
				<div><input type="text" name="email"/></div>
				<div><input type="button" value="send me the link"/></div>
			</div>
		</div>

		<div class="box" id="passwordForm">
			<h2>New Password</h2>
			<table>
				<tr><td>password</td><td><input type="password" name="password"/></td></tr>
				<tr><td>retype password</td><td><input type="password" name="retype_password"/></td></tr>
			</table>
			<input type="hidden" name="email"/>
			<input type="hidden" name="resetCode"/>
			<input type="button" value="set password and log in"/>
		</div>

		<div class="box" id="unsubscribeForm">
			<h2>Unsubscribed</h2>
			<p>
				<span>foo@bar.com</span> will no longer receive Live Tabletop e-mail updates
				unless you re-enable this option in your account settings.
			</p>
			<a href="#">Live Tabletop</a>
		</div>

		<!-- MAP (the campaign's current map) -->

		<div id="map">
			<div class="mapLayer" id="tileLayer"></div>
			<div class="mapLayer" id="wallLayer"></div>
			<div class="mapLayer" id="pieceLayer"></div>
			<div class="mapLayer" id="fogLayer"></div>
			<div id="clickLayers">
				<div class="clickLayer" id="clickTileLayer"></div>
				<div class="clickLayer" id="clickWallLayer"></div>
				<div class="clickLayer" id="clickPieceLayer"></div>
			</div>
		</div>

		<!-- PANELS -->

		<!-- User Panel -->
		<div class="panel" data-panel="user">
			<div class="title">
				<div class="resizeTL"></div>
				<div class="caption">User</div>
				<div class="resizeTR"></div>
				<div class="close"></div>
			</div>
			<div class="tabBar">
				<div class="tab active" data-tab="user info">My Account</div>
				<div class="tab" data-tab="user list">Friends</div>
				<div class="tab" data-tab="user sent">Sent</div>
				<div class="tab" data-tab="user received">Received</div>
			</div>
			<div class="content" data-tab="user info">
				<div id="userName">
					<span>User Name</span>
					<input type="button" value="rename"/>
				</div>
				<div>
					<select id="userColor">
						<option>red</option>
						<option>orange</option>
						<option>yellow</option>
						<option>green</option>
						<option>blue</option>
						<option>purple</option>
						<option>black</option>
						<option>gray</option>
						<option>white</option>
						<option>pink</option>
						<option>brown</option>
					</select>
				</div>
				<div>
					<input type="checkbox" id="userSubscribed"/>
					<label for="userSubscribed">receive e-mail updates</label>
				</div>
				<div id="userPassword">
<!-- TODO: should we require your old password? This would require additional code support in User.password
					<input type="password" name="old_password" placeholder="old password"/>
-->
					<input type="password" name="password" placeholder="new password"/>
					<input type="password" name="retype_password" placeholder="re-type password"/>
					<input type="button" value="change password"/>
				</div>
				<div>
					<input type="button" id="logout" value="logout"/>
					<input type="button" id="defaultPanels" value="default panels"/>
				</div>
			</div>
			<div class="content" data-tab="user list">
				<div id="friendRequest">
					<input type="text" name="recipient" placeholder="email address"/>
					<input type="button" value="send friend request"/>
				</div>
				<table id="friendsConfirmed">
					<tr class="template">
						<td class="email">e-mail address</td>
						<td><input type="button" value="remove"/></td>
					</tr>
				</table>
			</div>
			<div class="content" data-tab="user sent">
				<table id="friendsRequested">
					<tr class="template">
						<td class="email">e-mail address</td>
						<td><input type="button" value="cancel"/></td>
					</tr>
				</table>
			</div>
			<div class="content" data-tab="user received">
				<table id="friendsReceived">
					<tr class="template">
						<td class="email">e-mail address</td>
						<td><input type="button" value="confirm"/><input type="button" value="reject"/></td>
					</tr>
				</table>
			</div>
			<div class="resizeBL"></div>
			<div class="resizeBR"></div>
		</div>

		<!-- Campaign Panel -->
		<div class="panel" data-panel="campaign">
			<div class="title">
				<div class="resizeTL"></div>
				<div class="caption">Campaign</div>
				<div class="resizeTR"></div>
				<div class="close"></div>
			</div>
			<div class="tabBar">
				<div class="tab active" data-tab="campaign list">List</div>
				<div class="tab" data-tab="campaign info">Info</div>
				<div class="tab" data-tab="blacklist">Blacklist</div>
				<div class="tab" data-tab="chat">Chat & Roll</div>
			</div>
			<div class="content" data-tab="campaign list">
				<div id="createCampaign">
					<input type="text" name="name" placeholder="campaign name"/>
					<input type="button" value="create campaign"/>
				</div>
				<table id="campaignList">
					<tr class="template">
						<td><a class="name">Campaign Name</a></td>
						<td class="permission">owner</td>
						<td><input type="button" value="disown" class="disown"/></td>
					</tr>
				</table>
			</div>
			<div class="content" data-tab="campaign info">
				<div>
					<span id="campaignName">campaign name</span>
					<input class="campaignOwner" id="renameCampaign" type="button" value="rename"/>
				</div>
				<div class="campaignOwner">
					<input type="checkbox" value="private" id="campaignPrivate" checked="checked"/>
					<label for="campaignPrivate">private</label>
				</div>
				<div>
					<input type="button" value="close campaign" id="campaignClose"/>
				</div>
				<div class="campaignOwner">
					<select name="user" id="campaignFriend"><option>My Friend</option></select>
					<input type="button" value="invite to campaign" id="campaignInvite"/>
					<input type="button" value="share campaign" id="campaignShare"/>
				</div>
				<table id="campaignUsers">
					<tr class="template">
						<td><a class="name">user name</a></td>
						<td>
							<select class="permission">
								<option value="owner">owner</option>
								<option value="member">member</option>
								<option value="guest">guest</option>
								<option value="banned">banned</option>
							</select>
							<input type="checkbox" value="viewing" readonly="readonly"/><label>viewing</label>
							<input type="button" value="friend"/>
						</td>
					</tr>
				</table>
			</div>
			<div class="content" data-tab="blacklist">
				<table id="blacklist">
					<tr class="template">
						<td><a class="email">a@b.c</a></td>
						<td><input type="button" value="remove"/></td>
					</tr>
				</table>
			</div>
			<div class="content" data-tab="chat">
				<div id="chatOutput">
					<div class="message template"><span class="time">[time]</span><span class="user"> user: </span><span class="text">message</span></div>
					<a id="chatBottom"> </a>
				</div>
				<div id="chatForm"><textarea id="chatInput"></textarea><!-- <input type="submit" value="send"/> --></div>
			</div>
			<div class="resizeBL"></div>
			<div class="resizeBR"></div>
		</div>

		<!-- Map Panel -->
		<div class="panel" data-panel="map">
			<div class="title">
				<div class="resizeTL"></div>
				<div class="caption">Map</div>
				<div class="resizeTR"></div>
				<div class="close"></div>
			</div>
			<div class="tabBar">
				<div class="tab" data-tab="map list">List</div>
				<div class="tab" data-tab="map info">Info</div>
				<div class="tab active" data-tab="map tools">Tools</div>
				<div class="tab" data-tab="piece list">Pieces</div>
				<div class="tab" data-tab="piece info">Piece Info</div>
			</div>
			<div class="content" data-tab="map list">
				<div>
					<form id="mapCreator">
						<input type="text" name="name" placeholder="map name"/>
						<input name="columns" type="text" size="2" value="25"/>
						&times;
						<input name="rows" type="text" size="2" value="25"/>
						<select name="type">
							<option value="square" selected="selected">square</option>
							<option value="hex">hex</option>
						</select>
						<input type="button" value="create map" id="createMap"/>
					</form>
				</div>
				<div id="mapList">
					<div class="template">
						<span class="ellipsis mapListRow">
							<a class="name">Map Name</a>
							(<span class="columns">25</span>
							&times;
							<span class="rows">25</span>
							<span class="type">square</span>)&nbsp;
						</span>
						<input type="button" value="disown" class="disownMap"/>
					</div>
				</div>
			</div>
			<div class="content" data-tab="map info">
				<div>
					<span id="mapName" class="ellipsis">Map Name</span>
					<input id="renameMap" type="button" value="rename"/>
				</div>
				<div>
					<span id="mapColumns">25</span> &times; <span id="mapRows">25</span>
					<select id="mapType">
						<option value="square" selected="selected">square</option>
						<option value="hex">hex</option>
						<input type="button" value="close map" id="mapClose"/>
					</select>
				</div>
				<div id="resizeMapLeft">
					<input type="button" value="-10"/>
					<input type="button" value="-1"/>
					<input type="button" value="+1"/>
					<input type="button" value="+10"/>
					left columns 
				</div>
				<div id="resizeMapRight">
					<input type="button" value="-10"/>
					<input type="button" value="-1"/>
					<input type="button" value="+1"/>
					<input type="button" value="+10"/>
					right columns
				</div>
				<div id="resizeMapTop">
					<input type="button" value="-10"/>
					<input type="button" value="-1"/>
					<input type="button" value="+1"/>
					<input type="button" value="+10"/>
					top rows 
				</div>
				<div id="resizeMapBottom">
					<input type="button" value="-10"/>
					<input type="button" value="-1"/>
					<input type="button" value="+1"/>
					<input type="button" value="+10"/>
					bottom rows 
				</div>
				<div>
					<select id="grid_thickness">
						<option value="0">none</option>
						<option value="1" selected="selected">thin</option>
						<option value="2">thick</option>
					</select>
					<select id="grid_color">
						<option>red</option>
						<option>orange</option>
						<option>yellow</option>
						<option>green</option>
						<option>blue</option>
						<option>purple</option>
						<option>black</option>
						<option>gray</option>
						<option>white</option>
						<option>pink</option>
						<option>brown</option>
					</select>
					grid
				</div>
				<div>
					<select id="wall_thickness">
						<option value="3" selected="selected">thin</option>
						<option value="6">thick</option>
					</select>
					<select id="wall_color">
						<option>red</option>
						<option>orange</option>
						<option>yellow</option>
						<option>green</option>
						<option>blue</option>
						<option>purple</option>
						<option>black</option>
						<option>gray</option>
						<option>white</option>
						<option>pink</option>
						<option>brown</option>
					</select>
					wall
				</div>
				<div>
					<select id="door_thickness">
						<option value="3" selected="selected">thin</option>
						<option value="6">thick</option>
					</select>
					<select id="door_color">
						<option>red</option>
						<option>orange</option>
						<option>yellow</option>
						<option>green</option>
						<option>blue</option>
						<option>purple</option>
						<option>black</option>
						<option>gray</option>
						<option>white</option>
						<option>pink</option>
						<option>brown</option>
					</select>
					door
				</div>
				<div>
					<select id="min_zoom">
						<option value="25">25%</option>
						<option value="50">50%</option>
						<option value="100">100%</option>
						<option value="200">200%</option>
						<option value="400">400%</option>
					</select>
					-
					<select id="max_zoom">
						<option value="25">25%</option>
						<option value="50">50%</option>
						<option value="100">100%</option>
						<option value="200">200%</option>
						<option value="400">400%</option>
					</select>
					zoom
				</div>
				<div>
					<select id="min_rotate">
						<option value="-180">-180&deg;</option>
						<option value="-135">-135&deg;</option>
						<option value="-90">-90&deg;</option>
						<option value="-45">-45&deg;</option>
						<option value="0">0&deg;</option>
					</select>
					-
					<select id="max_rotate">
						<option value="180">180&deg;</option>
						<option value="135">135&deg;</option>
						<option value="90">90&deg;</option>
						<option value="45">45&deg;</option>
						<option value="0">0&deg;</option>
					</select>
					spin
					<select id="mapTilt">
						<option value="[30,90]" selected="selected">free tilt</option>
						<option value="[30,30]">side view</option>
						<option value="[90,90]">top view</option>
					</select>
				</div>
				<div>
					<select name="user" id="mapOwner"><option>My Friend</option></select>
					<input type="button" id="mapShare" value="share map"/>
				</div>
				<div id="mapOwners">
					<div class="template">
						<span class="ellipsis mapOwnerName">user name</span>
						<input class="mapOwnerRemove" type="button" value="remove owner"/>
					</div>
				</div>
			</div>
			<div class="content" data-tab="map tools">
				<div id="tools">
					<div class="swatch" data-tool="tile">tile</div>
					<div class="swatch" data-tool="erase">erase</div>
					<div class="swatch" data-tool="fog">fog</div>
					<div class="swatch" data-tool="wall">wall</div>
					<div class="swatch selected" data-tool="piece">piece</div>
				</div>
				<div id="toolOptions">
					<div data-tool="tile">
						Click on an image below to use it as a brush.
						Click and drag on the map to paint tiles.
						<br/>
					</div>
					<div data-tool="erase">
						Click and drag on the map to erase tile images.
					</div>
					<div data-tool="fog">
						<div>Click to toggle fog of war on map tiles. Drag to paint or erase.</div>
						<div>
							<input type="button" value="cover map with fog"/>
							<input type="button" value="remove all fog"/>
						</div>
					</div>
					<div data-tool="wall">
						Click on grid lines to create or remove walls and doors.
					</div>
					<div data-tool="piece">
						<div>
							Click on a piece on the map to see its properties.
							Drag a piece on the map to move it.
							Click on an image below to create a new piece.
<!-- TODO: external image URL -->
							<br/>
						</div>
						<div id="pieceCreatorImages"></div>
					</div>
				</div>
			</div>
			<div class="content" data-tab="piece list">
				<div id="pieceList">
					<div class="template">
						<span class="ellipsis pieceListRow">
							<a class="link">
								<img class="inlineImage" src="images/piece/rogue.png"/>
								<span class="name">rogue</span>
							</a>
							at (<span class="column">1</span>,<span class="row">3</span>)
						</span>
						<input type="button" value="delete" class="pieceDelete"/>
					</div>
				</div>
			</div>
			<div class="content" data-tab="piece info">
				<div>
					<span id="pieceName" class="ellipsis"></span>
					<input id="renamePiece" type="button" value="rename piece"/>
				</div>
				<div>
					<select name="character" id="pieceCharacter">
						<option value="-1">no character</option>
					</select>
					<input id="deletePiece" type="button" value="delete piece"/>	
				</div>
				<div>
					<select id="pieceView">
						<option value="top">top view</option>
						<option value="side">side view</option>
						<option value="front">front view</option>
						<option value="flat">flat front</option>
					</select>
					<select id="pieceDepth">
						<option value="-2">under tiles</option>
						<option value="-1">under grid</option>
						<option value="0">over grid</option>
						<option value="1">over fog</option>
					</select>
				</div>
				<div>
					<select id="pieceBase">
						<option value="none">do not show base</option>
						<option value="ellipse">elliptical base</option>
						<option value="rectangle">rectangular base</option>
					</select>
					<select id="pieceColor">
						<option>red</option>
						<option>orange</option>
						<option>yellow</option>
						<option>green</option>
						<option>blue</option>
						<option>purple</option>
						<option>black</option>
						<option>gray</option>
						<option>white</option>
						<option>pink</option>
						<option>brown</option>
					</select>
				</div>
				<div id="pieceCanvasWindow">
					<select id="pieceCanvasMode" size="4">
						<option>center</option>
						<option>base</option>
						<option>scale</option>
						<option>facing</option>
					</select>
					<div id="pieceCanvasText"></div>
					<canvas id="pieceCanvas" width="150" height="150"></canvas>
				</div>
				<div>
					<input id="changePieceURL" type="button" value="external image URL"/>
					<span id="pieceURL" class="ellipsis"></span>
				</div>
				<div id="pieceEditorImages"></div>
			</div>
			<div class="resizeBL"></div>
			<div class="resizeBR"></div>
		</div>

		<!-- Character Panel -->
		<div class="panel" data-panel="character">
			<div class="title">
				<div class="resizeTL"></div>
				<div class="caption">Character</div>
				<div class="resizeTR"></div>
				<div class="close"></div>
			</div>
			<div class="tabBar">
				<div class="tab active" data-tab="character list">List</div>
				<div class="tab" data-tab="character info">Info</div>
				<div class="tab" data-tab="character stats">Stats</div>
				<div class="tab" data-tab="character notes">Notes</div>
				<div class="tab" data-tab="character turns">Turns</div>
			</div>
			<div class="content" data-tab="character list">
				<div>
					<input name="name" type="text" placeholder="character name"/>
					<select><option value="-1">no system</option></select>
					<input type="button" value="create character"/>
				</div>
				<table>
					<tr class="template">
						<td><a class="name">character name</a></td>
						<td><input type="button" value="disown" class="disown"/></td>
					</tr>
				</table>
			</div>
			<div class="content" data-tab="character info">
				<form>
					<div>Name: <input name="name" type="text" placeholder="character name"/></div>
					<div>System: <select><option value="-1">no system</option></select></div>
					<div>
						Owners:
						<a>Player 1</a> <input type="button" value="remove"/>,
						<a>Player 2</a> <input type="button" value="remove"/>
						<select name="character_id"><option>Player 3</option></select><input type="button" value="add owner"/>
					</div>
					<div>
						Pieces:
						<a><img class="inlineImage" src="images/piece/rogue.png"/> rogue</a> at (1,3),
						<a><img class="inlineImage" src="images/piece/priest.png"/> priest</a> at (7,4)
					</div>
					<input name="image_id" type="hidden" value=""/>
				</form>
				<div id="portrait">TODO: character portrait</div>
				<div id="selectPortrait">TODO: character portrait selection</div>
			</div>
			<div class="content" data-tab="character stats">
				<div><input type="text" class="statName" value="NumberStat"/> <input type="text" class="statValue" value="18"/> <input type="button" class="statRemove" value="remove"/></div>
				<div><input type="text" class="statName" value="CodeStat"/> <input type="text" class="statValue" value="[&quot;apple&quot;, &quot;orange&quot;]"/> <input type="button" class="statRemove" value="remove"/></div>
				<div>
					<input type="button" value="add stat"/>
					<input type="button" value="apply changes" id="submitStats"/>
				</div>
			</div>
			<div class="content" data-tab="character notes">
				<textarea name="notes"></textarea>
				<input type="button" value="apply changes"/>
			</div>
			<div class="content" data-tab="character turns">
				<table id="turns">
					<tr class="template">
						<td class="name">turn name</td>
						<td><input type="button" value="up"/></td>
						<td><input type="button" value="down"/></td>
						<td><input type="button" value="rename"/></td>
						<td><input type="button" value="remove"/></td>
					</tr>
				</table>
				<div>
					<td><input type="button" value="rotate forward"/></td>
					<td><input type="button" value="rotate backward"/></td>
				</div>
				<div>
					<select><option value="-1">no character</option></select>
					<input type="text" value="description" placeholder="description"/>
					<input type="button" value="add turn"/>
				</div>
			</div>
			<div class="resizeBL"></div>
			<div class="resizeBR"></div>
		</div>


		<!-- PAGE BAR (permanent controls at the top of the page) -->

		<div id="pageBar">
			<div id="logo"></div>
			<div id="panelButtons">
				<div class="panelButton" data-panel="user">User</div>
				<div class="panelButton" data-panel="campaign">Campaign</div>
				<div class="panelButton" data-panel="map">Map</div>
				<div class="panelButton" data-panel="character">Character</div>
			</div>
			<div id="viewControls">
				<input type="button" value="-" id="zoomOut"/>
				<input type="button" value="+" id="zoomIn"/>
				<input type="button" value="&#8634;" id="rotateLeft"/>
				<input type="button" value="&#8635;" id="rotateRight"/>
				<input type="button" value="&#8593;" id="tiltUp"/>
				<input type="button" value="&#8595;" id="tiltDown"/>
			</div>
		</div>

	</body>
</html>
